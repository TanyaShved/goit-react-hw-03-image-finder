{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.jsx","services/image-api.js","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","components/ImageGallery/ImageGallery.jsx","App.jsx","index.jsx","components/Searchbar/Searcbar.module.css"],"names":["module","exports","Searcbar","state","imageName","hendelNameChange","e","setState","currentTarget","value","toLowerCase","hendelSubmit","preventDefault","trim","props","onSubmit","toast","warn","this","className","s","Searchbar","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchImages","page","fetch","then","response","ok","json","Promise","reject","Error","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClick","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","src","largeImageURL","alt","ImageGalleryItem","showModal","toggleModal","webformatURL","tags","ImageGalleryItem_image","Button","Status","ImageGallery","images","error","status","fetchImageGallery","imagesAPI","hits","length","prevState","catch","onClickLoadMore","onChangeImage","console","log","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","color","height","width","timeout","message","map","id","App","hendelFormSubmit","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7e8676f8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2AxMb\",\"Modal\":\"Modal_Modal__2WBTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3CvRl\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__1P7Nb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3R1xi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__DncjJ\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './Searcbar.module.css';\n\nclass Searcbar extends Component {\n  state = {\n    imageName: '',\n  };\n\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  hendelNameChange = e => {\n    this.setState({ imageName: e.currentTarget.value.toLowerCase() });\n  };\n\n  hendelSubmit = e => {\n    const { imageName } = this.state;\n    \n    e.preventDefault();\n\n    // проверяем не пустой ли нам инпут\n    if (imageName.trim() === '') {\n      toast.warn('Ввидите название!');\n      return;\n    }\n\n    this.props.onSubmit(imageName);\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    const { imageName } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.hendelSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button_label}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={imageName}\n            onChange={this.hendelNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searcbar;\n","const API_KEY = '19013398-a980467a71ce13bd0d53bc132';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nfunction fetchImages(imageName, page) {\n  return fetch(\n    `${BASE_URL}?q=${imageName}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`Нет галлереи с таким названием ${imageName}`),\n    );\n  });\n}\n\nconst api = { fetchImages };\n\nexport default api;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  static propTypes = {\n    onClick: PropTypes.func.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClick();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClick();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={this.props.largeImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from '../../components/Modal/Modal';\nimport s from './ImageGalleryItem.module.css';\n\nclass ImageGalleryItem extends Component {\n  state = {\n    showModal: false,\n  };\n\n  static propTypes = {\n    webformatURL: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n    tags: PropTypes.string.isRequired,\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { showModal } = this.state;\n    const { webformatURL, largeImageURL, tags } = this.props;\n\n    return (\n      <>\n        <li className={s.ImageGalleryItem}>\n          <img\n            onClick={this.toggleModal}\n            src={webformatURL}\n            alt={tags}\n            className={s.ImageGalleryItem_image}\n          />\n          {showModal && (\n            <Modal\n              onClick={this.toggleModal}\n              largeImageURL={largeImageURL}\n              alt={tags}\n            />\n          )}\n        </li>\n      </>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load More\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport imagesAPI from '../../services/image-api';\nimport ImageGalleryItem from '../../components/ImageGalleryItem/ImageGalleryItem';\nimport Button from '../../components/Button/Button';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './ImageGallery.module.css';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass ImageGallery extends Component {\n  state = {\n    images: [],\n    error: null,\n    status: Status.IDLE,\n    page: 1,\n  };\n\n  static propTypes = {\n    imageName: PropTypes.string.isRequired,\n    onChangeImage: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    this.props.onChangeImage(''); \n    console.log('первий рендер')\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { imageName } = this.props;\n    const { page, images } = this.state;\n\n    if (prevProps.imageName !== imageName) {\n      if (page === 1) {\n        this.fetchImageGallery();\n      }\n      else {\n        this.setState({ page: 1, status: Status.PENDING, images: [] });\n      }\n    }\n\n    if (prevState.page !== page) {\n      this.fetchImageGallery();\n    }\n\n    if (prevState.images !== images) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  fetchImageGallery = () => {\n    const { imageName } = this.props;\n    const { page } = this.state;\n\n    imagesAPI\n      .fetchImages(imageName, page)\n      .then(images => {\n        if (images.hits.length !== 0) {\n          this.setState(prevState => ({\n            images: [...prevState.images, ...images.hits],\n            status: Status.RESOLVED,\n          }));\n\n          return;\n        }\n        return Promise.reject(\n          new Error(`Нет галлереи с таким названием ${imageName}`),\n        );\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  onClickLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  render() {\n    const { images, error, status } = this.state;\n\n    if (status === Status.IDLE) {\n      return <h1>Ввидите название</h1>;\n    }\n\n    if (status === Status.PENDING) {\n      return (\n        <Loader\n          type=\"Bars\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      );\n    }\n\n    if (status === Status.REJECTED) {\n      return <h1>{error.message}</h1>;\n    }\n\n    if (status === Status.RESOLVED) {\n      return (\n        <>\n          <ul className={s.ImageGallery}>\n            {images.map(({ id, webformatURL, largeImageURL, tags }) => (\n              <ImageGalleryItem\n                key={id}\n                webformatURL={webformatURL}\n                largeImageURL={largeImageURL}\n                tags={tags}\n              />\n            ))}\n          </ul>\n          <Button onClick={this.onClickLoadMore} />\n        </>\n      );\n    }\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searcbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\n\nclass App extends Component {\n  state = {\n    imageName: '',\n  };\n\n  hendelFormSubmit = imageName => {\n    this.setState({ imageName });\n  };\n\n  render() {\n    const { imageName } = this.state;\n    return (\n      <>\n        <Searcbar onSubmit={this.hendelFormSubmit} />\n        <ImageGallery imageName={imageName} onChangeImage={this.hendelFormSubmit} />\n        <ToastContainer position=\"top-center\" />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searcbar_Searchbar__srXIb\",\"SearchForm\":\"Searcbar_SearchForm__P4C8_\",\"SearchForm_button\":\"Searcbar_SearchForm_button__1CVq2\",\"SearchForm_button_label\":\"Searcbar_SearchForm_button_label__1B5iQ\",\"SearchForm_input\":\"Searcbar_SearchForm_input__1YCxI\"};"],"sourceRoot":""}