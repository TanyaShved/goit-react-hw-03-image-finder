(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},12:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__1P7Nb"}},14:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},16:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ"}},22:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),o=a.n(r),c=a(7),i=a.n(c),s=(a(22),a(3)),l=a(4),m=a(6),u=a(5),h=a(9),g=(a(23),a(8)),b=a.n(g),p=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imageName:""},e.hendelNameChange=function(t){e.setState({imageName:t.currentTarget.value.toLowerCase()})},e.hendelSubmit=function(t){var a=e.state.imageName;t.preventDefault(),""!==a.trim()?(e.props.onSubmit(a),e.setState({imageName:""})):h.b.warn("\u0412\u0432\u0438\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!")},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.imageName;return Object(n.jsx)("header",{className:b.a.Searchbar,children:Object(n.jsxs)("form",{onSubmit:this.hendelSubmit,className:b.a.SearchForm,children:[Object(n.jsx)("button",{type:"submit",className:b.a.SearchForm_button,children:Object(n.jsx)("span",{className:b.a.SearchForm_button_label,children:"Search"})}),Object(n.jsx)("input",{className:b.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.hendelNameChange})]})})}}]),a}(r.Component),d=a(13);var j={fetchImages:function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("19013398-a980467a71ce13bd0d53bc132","&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u0433\u0430\u043b\u043b\u0435\u0440\u0435\u0438 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat(e)))}))}},f=a(11),O=a.n(f),y=document.querySelector("#modal-root"),_=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClick()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClick()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(n.jsx)("div",{className:O.a.Overlay,onClick:this.handleBackdropClick,children:Object(n.jsx)("div",{className:O.a.Modal,children:Object(n.jsx)("img",{src:this.props.largeImageURL,alt:""})})}),y)}}]),a}(r.Component),v=a(12),S=a.n(v),x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showModal:!1},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,a=t.webformatURL,r=t.largeImageURL,o=t.tags;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("li",{className:S.a.ImageGalleryItem,children:[Object(n.jsx)("img",{onClick:this.toggleModal,src:a,alt:o,className:S.a.ImageGalleryItem_image}),e&&Object(n.jsx)(_,{onClick:this.toggleModal,largeImageURL:r,alt:o})]})})}}]),a}(r.Component),I=a(14),w=a.n(I),k=function(e){var t=e.onClick;return Object(n.jsx)("button",{type:"button",className:w.a.Button,onClick:t,children:"Load More"})},N=a(15),C=a.n(N),F=(a(45),a(16)),M=a.n(F),G="idle",L="pending",B="resolved",R="rejected",U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],error:null,status:G,page:1},e.fetchImageGallery=function(){var t=e.props.imageName,a=e.state.page;j.fetchImages(t,a).then((function(n){return 0!==n.hits.length?(e.setState((function(e){return{images:[].concat(Object(d.a)(e.images),Object(d.a)(n.hits)),status:B}})),void(a>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}))):Promise.reject(new Error("\u041d\u0435\u0442 \u0433\u0430\u043b\u043b\u0435\u0440\u0435\u0438 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat(t)))})).catch((function(t){return e.setState({error:t,status:R})}))},e.onClickLoadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.imageName,n=this.state.page;e.imageName!==a&&(this.setState({images:[],page:1}),console.log(this.state.images),console.log(this.state.page)),e.imageName===a&&t.page===n||(this.setState({status:L}),this.fetchImageGallery())}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.error,r=e.status;return r===G?Object(n.jsx)("h1",{children:"\u0412\u0432\u0438\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}):r===L?Object(n.jsx)(C.a,{type:"Bars",color:"#00BFFF",height:100,width:100,timeout:3e3}):r===R?Object(n.jsx)("h1",{children:a.message}):r===B?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:M.a.ImageGallery,children:t.map((function(e){var t=e.id,a=e.webformatURL,r=e.largeImageURL,o=e.tags;return Object(n.jsx)(x,{webformatURL:a,largeImageURL:r,tags:o},t)}))}),Object(n.jsx)(k,{onClick:this.onClickLoadMore})]}):void 0}}]),a}(r.Component),D=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imageName:""},e.hendelFormSubmit=function(t){e.setState({imageName:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.imageName;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p,{onSubmit:this.hendelFormSubmit}),Object(n.jsx)(U,{imageName:e}),Object(n.jsx)(h.a,{position:"top-center"})]})}}]),a}(r.Component);i.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(D,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={Searchbar:"Searcbar_Searchbar__srXIb",SearchForm:"Searcbar_SearchForm__P4C8_",SearchForm_button:"Searcbar_SearchForm_button__1CVq2",SearchForm_button_label:"Searcbar_SearchForm_button_label__1B5iQ",SearchForm_input:"Searcbar_SearchForm_input__1YCxI"}}},[[46,1,2]]]);
//# sourceMappingURL=main.8f883e9d.chunk.js.map